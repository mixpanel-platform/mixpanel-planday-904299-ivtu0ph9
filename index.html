<!DOCTYPE html>

<script id='jql-query'>

MP.api.jql(
  function main() {
  
  var PortalGuid = "008e832a-8725-4f22-b1fc-54461ca8f6f9"
  var days = 30;
  var endDate = new Date();
  var startDate = new Date();
  startDate.setDate(endDate.getDate() - days);
  
  return Events({
    from_date: startDate.toJSON().slice(0,10),
    to_date:   endDate.toJSON().slice(0,10),
  })
  .filter(function(item){return item.properties.PortalGuid == PortalGuid})
  .groupBy(["name"], mixpanel.reducer.count());
}

).done(function(results) {
    console.log(results);
});



</script>